{% extends "base.html"%}

{% block body %}
<h1>TensorflowJS client side prediction</h1>
<h2>When you first time press predict it will take more time, for model to load</h2>
<main>
    <input type="file" id="file" multiple>
    <label for="file">Choose files</label>
    <button type="submit">Predict</button>
    <button type="submit">Clear</button>
    <span></span>
</main>
<div></div>
{% endblock %}

{% block script %}
<script>
async function run() {
  // [START load_and_run_model]
  const model = await tf.automl.loadImageClassification('C:\\Users\\leung\\PycharmProjects\\demowebpage\\templates\\model.json');
  const image = document.getElementById('daisy');
  const predictions = await model.classify(image);
  // [END load_and_run_model]
  console.log(predictions);
  // Show the resulting object on the page.
  const pre = document.createElement('pre');
  pre.textContent = JSON.stringify(predictions, null, 2);
  document.body.append(pre);
}
run();
</script>
{% endblock %}